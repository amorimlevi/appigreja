<!doctype html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="theme-color" content="#2563eb">
    <title>Igreja PWA - Demo</title>
    <style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  line-height: 1.6;
  color: #333;
  background-color: #f5f5f5;
}

.header {
  background: linear-gradient(135deg, #2563eb, #1d4ed8);
  color: white;
  padding: 1rem;
  box-shadow: 0 2px 10px rgba(0,0,0,0.1);
}

.header h1 {
  text-align: center;
  margin-bottom: 1rem;
  font-size: 1.8rem;
}

.nav {
  display: flex;
  justify-content: center;
  gap: 1rem;
}

.nav-btn {
  padding: 0.75rem 1.5rem;
  border: none;
  background: rgba(255,255,255,0.2);
  color: white;
  border-radius: 25px;
  cursor: pointer;
  transition: all 0.3s ease;
  font-weight: 500;
}

.nav-btn:hover {
  background: rgba(255,255,255,0.3);
}

.nav-btn.active {
  background: white;
  color: #2563eb;
}

.main {
  padding: 2rem;
  max-width: 1200px;
  margin: 0 auto;
}

.section {
  display: none;
}

.section.active {
  display: block;
}

.section-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 2rem;
  flex-wrap: wrap;
  gap: 1rem;
}

.section-header h2 {
  color: #1f2937;
  font-size: 1.5rem;
}

.btn-primary {
  background: #2563eb;
  color: white;
  padding: 0.75rem 1.5rem;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  font-weight: 500;
  transition: all 0.3s ease;
}

.btn-primary:hover {
  background: #1d4ed8;
  transform: translateY(-1px);
}

.btn-secondary {
  background: #6b7280;
  color: white;
  padding: 0.75rem 1.5rem;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  font-weight: 500;
  transition: all 0.3s ease;
}

.btn-secondary:hover {
  background: #4b5563;
}

.lista {
  display: grid;
  gap: 1rem;
  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
}

.card {
  background: white;
  padding: 1.5rem;
  border-radius: 12px;
  box-shadow: 0 2px 10px rgba(0,0,0,0.1);
  transition: all 0.3s ease;
}

.card:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 20px rgba(0,0,0,0.15);
}

.card-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: 1rem;
}

.card-title {
  font-size: 1.25rem;
  font-weight: 600;
  color: #1f2937;
  margin-bottom: 0.5rem;
}

.card-actions {
  display: flex;
  gap: 0.5rem;
}

.btn-icon {
  width: 32px;
  height: 32px;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.3s ease;
}

.btn-edit {
  background: #f59e0b;
  color: white;
}

.btn-edit:hover {
  background: #d97706;
}

.btn-delete {
  background: #ef4444;
  color: white;
}

.btn-delete:hover {
  background: #dc2626;
}

.card-info {
  color: #6b7280;
  font-size: 0.9rem;
  line-height: 1.5;
}

.status {
  display: inline-block;
  padding: 0.25rem 0.75rem;
  border-radius: 20px;
  font-size: 0.8rem;
  font-weight: 500;
  text-transform: uppercase;
}

.status.ativo {
  background: #dcfce7;
  color: #166534;
}

.status.inativo {
  background: #fef2f2;
  color: #991b1b;
}

.modal {
  display: none;
  position: fixed;
  z-index: 1000;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0,0,0,0.5);
  backdrop-filter: blur(4px);
}

.modal.active {
  display: flex;
  align-items: center;
  justify-content: center;
}

.modal-content {
  background: white;
  padding: 2rem;
  border-radius: 12px;
  width: 90%;
  max-width: 500px;
  max-height: 80vh;
  overflow-y: auto;
  position: relative;
  animation: modalSlide 0.3s ease-out;
}

@keyframes modalSlide {
  from {
    opacity: 0;
    transform: translateY(-50px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.close {
  position: absolute;
  right: 1rem;
  top: 1rem;
  font-size: 24px;
  cursor: pointer;
  color: #6b7280;
}

.close:hover {
  color: #ef4444;
}

.modal-content h3 {
  margin-bottom: 1.5rem;
  color: #1f2937;
}

.modal-content form {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.modal-content input,
.modal-content select,
.modal-content textarea {
  padding: 0.75rem;
  border: 2px solid #e5e7eb;
  border-radius: 8px;
  font-size: 1rem;
  transition: border-color 0.3s ease;
}

.modal-content input:focus,
.modal-content select:focus,
.modal-content textarea:focus {
  outline: none;
  border-color: #2563eb;
}

.modal-content textarea {
  resize: vertical;
  min-height: 80px;
}

.modal-actions {
  display: flex;
  gap: 1rem;
  justify-content: flex-end;
  margin-top: 1.5rem;
}

.empty-state {
  text-align: center;
  padding: 3rem;
  color: #6b7280;
}

.empty-state h3 {
  margin-bottom: 0.5rem;
  color: #9ca3af;
}

@media (max-width: 768px) {
  .header {
    padding: 1rem 0.5rem;
  }
  
  .main {
    padding: 1rem;
  }
  
  .section-header {
    flex-direction: column;
    align-items: stretch;
  }
  
  .lista {
    grid-template-columns: 1fr;
  }
  
  .modal-content {
    margin: 1rem;
    padding: 1.5rem;
  }
  
  .modal-actions {
    flex-direction: column;
  }
}
    </style>
  </head>
  <body>
    <div id="app">
      <header class="header">
        <h1>⛪ Igreja PWA - Demo</h1>
        <nav class="nav">
          <button id="membrosTab" class="nav-btn active">Membros</button>
          <button id="eventosTab" class="nav-btn">Eventos</button>
        </nav>
      </header>

      <main class="main">
        <!-- Seção de Membros -->
        <section id="membrosSection" class="section active">
          <div class="section-header">
            <h2>Gestão de Membros</h2>
            <button id="adicionarMembro" class="btn-primary">+ Adicionar Membro</button>
          </div>
          <div id="listaMembros" class="lista"></div>
        </section>

        <!-- Seção de Eventos -->
        <section id="eventosSection" class="section">
          <div class="section-header">
            <h2>Gestão de Eventos</h2>
            <button id="adicionarEvento" class="btn-primary">+ Adicionar Evento</button>
          </div>
          <div id="listaEventos" class="lista"></div>
        </section>
      </main>

      <!-- Modal para Membros -->
      <div id="modalMembro" class="modal">
        <div class="modal-content">
          <span class="close">&times;</span>
          <h3 id="modalMembroTitulo">Adicionar Membro</h3>
          <form id="formMembro">
            <input type="hidden" id="membroId">
            <input type="text" id="membroNome" placeholder="Nome completo" required>
            <input type="email" id="membroEmail" placeholder="Email">
            <input type="tel" id="membroTelefone" placeholder="Telefone">
            <input type="date" id="membroNascimento" placeholder="Data de nascimento">
            <select id="membroStatus">
              <option value="ativo">Ativo</option>
              <option value="inativo">Inativo</option>
            </select>
            <textarea id="membroObservacoes" placeholder="Observações"></textarea>
            <div class="modal-actions">
              <button type="button" class="btn-secondary" id="cancelarMembro">Cancelar</button>
              <button type="submit" class="btn-primary">Salvar</button>
            </div>
          </form>
        </div>
      </div>

      <!-- Modal para Eventos -->
      <div id="modalEvento" class="modal">
        <div class="modal-content">
          <span class="close">&times;</span>
          <h3 id="modalEventoTitulo">Adicionar Evento</h3>
          <form id="formEvento">
            <input type="hidden" id="eventoId">
            <input type="text" id="eventoNome" placeholder="Nome do evento" required>
            <textarea id="eventoDescricao" placeholder="Descrição"></textarea>
            <input type="datetime-local" id="eventoData" required>
            <input type="text" id="eventoLocal" placeholder="Local">
            <select id="eventoTipo">
              <option value="culto">Culto</option>
              <option value="estudo">Estudo Bíblico</option>
              <option value="conferencia">Conferência</option>
              <option value="retiro">Retiro</option>
              <option value="outro">Outro</option>
            </select>
            <div class="modal-actions">
              <button type="button" class="btn-secondary" id="cancelarEvento">Cancelar</button>
              <button type="submit" class="btn-primary">Salvar</button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <script>
// Classe para gerenciar dados localmente
class DataManager {
  constructor() {
    this.membros = JSON.parse(localStorage.getItem('membros')) || []
    this.eventos = JSON.parse(localStorage.getItem('eventos')) || []
  }

  salvarMembros() {
    localStorage.setItem('membros', JSON.stringify(this.membros))
  }

  salvarEventos() {
    localStorage.setItem('eventos', JSON.stringify(this.eventos))
  }

  adicionarMembro(membro) {
    membro.id = Date.now().toString()
    membro.dataCadastro = new Date().toISOString()
    this.membros.push(membro)
    this.salvarMembros()
    return membro
  }

  atualizarMembro(id, dadosAtualizados) {
    const index = this.membros.findIndex(m => m.id === id)
    if (index !== -1) {
      this.membros[index] = { ...this.membros[index], ...dadosAtualizados }
      this.salvarMembros()
      return this.membros[index]
    }
    return null
  }

  excluirMembro(id) {
    this.membros = this.membros.filter(m => m.id !== id)
    this.salvarMembros()
  }

  adicionarEvento(evento) {
    evento.id = Date.now().toString()
    evento.dataCriacao = new Date().toISOString()
    this.eventos.push(evento)
    this.salvarEventos()
    return evento
  }

  atualizarEvento(id, dadosAtualizados) {
    const index = this.eventos.findIndex(e => e.id === id)
    if (index !== -1) {
      this.eventos[index] = { ...this.eventos[index], ...dadosAtualizados }
      this.salvarEventos()
      return this.eventos[index]
    }
    return null
  }

  excluirEvento(id) {
    this.eventos = this.eventos.filter(e => e.id !== id)
    this.salvarEventos()
  }
}

// Classe principal da aplicação
class IgrejaApp {
  constructor() {
    this.dataManager = new DataManager()
    this.currentTab = 'membros'
    this.editingMembro = null
    this.editingEvento = null
    
    this.init()
  }

  init() {
    this.setupEventListeners()
    this.renderMembros()
    this.renderEventos()
  }

  setupEventListeners() {
    // Navegação entre tabs
    document.getElementById('membrosTab').addEventListener('click', () => this.switchTab('membros'))
    document.getElementById('eventosTab').addEventListener('click', () => this.switchTab('eventos'))

    // Botões de adicionar
    document.getElementById('adicionarMembro').addEventListener('click', () => this.abrirModalMembro())
    document.getElementById('adicionarEvento').addEventListener('click', () => this.abrirModalEvento())

    // Formulários
    document.getElementById('formMembro').addEventListener('submit', (e) => this.salvarMembro(e))
    document.getElementById('formEvento').addEventListener('submit', (e) => this.salvarEvento(e))

    // Botões de cancelar
    document.getElementById('cancelarMembro').addEventListener('click', () => this.fecharModalMembro())
    document.getElementById('cancelarEvento').addEventListener('click', () => this.fecharModalEvento())

    // Fechar modais clicando no X
    document.querySelectorAll('.close').forEach(btn => {
      btn.addEventListener('click', (e) => {
        const modal = e.target.closest('.modal')
        modal.classList.remove('active')
      })
    })

    // Fechar modais clicando fora
    document.querySelectorAll('.modal').forEach(modal => {
      modal.addEventListener('click', (e) => {
        if (e.target === modal) {
          modal.classList.remove('active')
        }
      })
    })
  }

  switchTab(tab) {
    this.currentTab = tab
    
    // Atualizar botões de navegação
    document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'))
    document.getElementById(`${tab}Tab`).classList.add('active')
    
    // Mostrar seção correspondente
    document.querySelectorAll('.section').forEach(section => section.classList.remove('active'))
    document.getElementById(`${tab}Section`).classList.add('active')
  }

  // Métodos para Membros
  abrirModalMembro(membro = null) {
    this.editingMembro = membro
    const modal = document.getElementById('modalMembro')
    const titulo = document.getElementById('modalMembroTitulo')
    
    if (membro) {
      titulo.textContent = 'Editar Membro'
      document.getElementById('membroId').value = membro.id
      document.getElementById('membroNome').value = membro.nome
      document.getElementById('membroEmail').value = membro.email || ''
      document.getElementById('membroTelefone').value = membro.telefone || ''
      document.getElementById('membroNascimento').value = membro.nascimento || ''
      document.getElementById('membroStatus').value = membro.status || 'ativo'
      document.getElementById('membroObservacoes').value = membro.observacoes || ''
    } else {
      titulo.textContent = 'Adicionar Membro'
      document.getElementById('formMembro').reset()
    }
    
    modal.classList.add('active')
  }

  fecharModalMembro() {
    document.getElementById('modalMembro').classList.remove('active')
    document.getElementById('formMembro').reset()
    this.editingMembro = null
  }

  salvarMembro(e) {
    e.preventDefault()
    
    const dadosMembro = {
      nome: document.getElementById('membroNome').value,
      email: document.getElementById('membroEmail').value,
      telefone: document.getElementById('membroTelefone').value,
      nascimento: document.getElementById('membroNascimento').value,
      status: document.getElementById('membroStatus').value,
      observacoes: document.getElementById('membroObservacoes').value
    }

    if (this.editingMembro) {
      this.dataManager.atualizarMembro(this.editingMembro.id, dadosMembro)
    } else {
      this.dataManager.adicionarMembro(dadosMembro)
    }

    this.renderMembros()
    this.fecharModalMembro()
  }

  excluirMembro(id) {
    if (confirm('Tem certeza que deseja excluir este membro?')) {
      this.dataManager.excluirMembro(id)
      this.renderMembros()
    }
  }

  renderMembros() {
    const lista = document.getElementById('listaMembros')
    
    if (this.dataManager.membros.length === 0) {
      lista.innerHTML = `
        <div class="empty-state">
          <h3>Nenhum membro cadastrado</h3>
          <p>Clique em "Adicionar Membro" para começar</p>
        </div>
      `
      return
    }

    lista.innerHTML = this.dataManager.membros.map(membro => `
      <div class="card">
        <div class="card-header">
          <div>
            <div class="card-title">${membro.nome}</div>
            <span class="status ${membro.status || 'ativo'}">${membro.status || 'ativo'}</span>
          </div>
          <div class="card-actions">
            <button class="btn-icon btn-edit" onclick="app.abrirModalMembro(${JSON.stringify(membro).replace(/"/g, '&quot;')})">✏️</button>
            <button class="btn-icon btn-delete" onclick="app.excluirMembro('${membro.id}')">🗑️</button>
          </div>
        </div>
        <div class="card-info">
          ${membro.email ? `<div>📧 ${membro.email}</div>` : ''}
          ${membro.telefone ? `<div>📱 ${membro.telefone}</div>` : ''}
          ${membro.nascimento ? `<div>🎂 ${new Date(membro.nascimento).toLocaleDateString('pt-BR')}</div>` : ''}
          ${membro.observacoes ? `<div style="margin-top: 0.5rem;">${membro.observacoes}</div>` : ''}
        </div>
      </div>
    `).join('')
  }

  // Métodos para Eventos
  abrirModalEvento(evento = null) {
    this.editingEvento = evento
    const modal = document.getElementById('modalEvento')
    const titulo = document.getElementById('modalEventoTitulo')
    
    if (evento) {
      titulo.textContent = 'Editar Evento'
      document.getElementById('eventoId').value = evento.id
      document.getElementById('eventoNome').value = evento.nome
      document.getElementById('eventoDescricao').value = evento.descricao || ''
      document.getElementById('eventoData').value = evento.data
      document.getElementById('eventoLocal').value = evento.local || ''
      document.getElementById('eventoTipo').value = evento.tipo || 'culto'
    } else {
      titulo.textContent = 'Adicionar Evento'
      document.getElementById('formEvento').reset()
    }
    
    modal.classList.add('active')
  }

  fecharModalEvento() {
    document.getElementById('modalEvento').classList.remove('active')
    document.getElementById('formEvento').reset()
    this.editingEvento = null
  }

  salvarEvento(e) {
    e.preventDefault()
    
    const dadosEvento = {
      nome: document.getElementById('eventoNome').value,
      descricao: document.getElementById('eventoDescricao').value,
      data: document.getElementById('eventoData').value,
      local: document.getElementById('eventoLocal').value,
      tipo: document.getElementById('eventoTipo').value
    }

    if (this.editingEvento) {
      this.dataManager.atualizarEvento(this.editingEvento.id, dadosEvento)
    } else {
      this.dataManager.adicionarEvento(dadosEvento)
    }

    this.renderEventos()
    this.fecharModalEvento()
  }

  excluirEvento(id) {
    if (confirm('Tem certeza que deseja excluir este evento?')) {
      this.dataManager.excluirEvento(id)
      this.renderEventos()
    }
  }

  renderEventos() {
    const lista = document.getElementById('listaEventos')
    
    if (this.dataManager.eventos.length === 0) {
      lista.innerHTML = `
        <div class="empty-state">
          <h3>Nenhum evento cadastrado</h3>
          <p>Clique em "Adicionar Evento" para começar</p>
        </div>
      `
      return
    }

    // Ordenar eventos por data
    const eventosOrdenados = [...this.dataManager.eventos].sort((a, b) => new Date(a.data) - new Date(b.data))

    lista.innerHTML = eventosOrdenados.map(evento => {
      const dataEvento = new Date(evento.data)
      const agora = new Date()
      const isPassado = dataEvento < agora
      
      return `
        <div class="card ${isPassado ? 'evento-passado' : ''}">
          <div class="card-header">
            <div>
              <div class="card-title">${evento.nome}</div>
              <span class="status ${evento.tipo}">${evento.tipo}</span>
            </div>
            <div class="card-actions">
              <button class="btn-icon btn-edit" onclick="app.abrirModalEvento(${JSON.stringify(evento).replace(/"/g, '&quot;')})">✏️</button>
              <button class="btn-icon btn-delete" onclick="app.excluirEvento('${evento.id}')">🗑️</button>
            </div>
          </div>
          <div class="card-info">
            <div>📅 ${dataEvento.toLocaleDateString('pt-BR')} às ${dataEvento.toLocaleTimeString('pt-BR', {hour: '2-digit', minute: '2-digit'})}</div>
            ${evento.local ? `<div>📍 ${evento.local}</div>` : ''}
            ${evento.descricao ? `<div style="margin-top: 0.5rem;">${evento.descricao}</div>` : ''}
          </div>
        </div>
      `
    }).join('')
  }
}

// Inicializar aplicação
const app = new IgrejaApp()

// Tornar app global para uso nos event handlers inline
window.app = app
    </script>
  </body>
</html>
